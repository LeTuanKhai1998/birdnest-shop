# Cursor Rules

## Instructions

- Record fixes for mistakes or corrections to avoid repetition in the `Lessons` section.
- Organize thoughts and plan steps before starting a task in the `Scratchpad` section.
- Clear old tasks if necessary.
- Use todo markers for progress tracking:
  - `[X]` Completed tasks
  - `[ ]` Pending tasks
- Update Scratchpad after completing subtasks.
- Reflect and plan after milestones for better task management.
- Always refer to Scratchpad before planning the next step.

## Lessons

## Scratchpad

### 1. Project Setup and Configuration []

- [X] Initialize Next.js 15 project with TypeScript
- [X] Set up project structure and folders
- [X] Configure ESLint and Prettier
- [X] Install and configure dependencies:
  - Shadcn UI components
  - Lucide icons
  - Zod for validation
  - Zustand for state management
  - Recharts for analytics
  - Resend for emails
  - Uploadthing for file uploads
  - Prisma ORM
  - PostgreSQL database
  - NextAuth.js beta for authentication
  - Stripe for payments

### 2. Database and Authentication []

- [X] Set up PostgreSQL database
- [X] Configure Prisma schema:
  - User model
  - Product model
  - Category model
  - Order model
  - Review model
  - Cart model
- [X] Implement NextAuth.js authentication:
  - Email/Password
  - OAuth providers (Google, GitHub)
  - JWT handling
  - Protected routes

### 3. Core Features - Customer Side [ ]

- [X] Home Layout:
  - Create `(home)` folder in the `app` directory  
  - Header with logo, search bar, and navigation (Home, Products, About, Contact)  
  - Footer with links (Purchase Policy, Delivery, Return & Exchange) and social media (Facebook, Zalo, Instagram)

- [X] Homepage:
  - Banner carousel (images of bird's nest, gift combos, promotions)  
  - Latest bird's nest products  
  - Premium bird's nest combos

- [X] Products Catalog:
  - Sidebar with categories and filters:  
    - Nest type: Refined Nest, Raw Nest, Feather-removed Nest  
    - Origin: Kien Giang  
    - Weight: 50g, 100g, 200g  
    - Price range  
  - Search results  
  - Product grid  
  - Pagination

- [X] Product pages:
  - Create product detail page layout  
  - Implement image gallery with thumbnails  
  - Add product information section:  
    - Product name, price, full description  
    - Stock status (in stock / out of stock)  
    - Add to cart button  
  - Reviews and ratings section:  
    - Display existing reviews  
    - Add review form for authenticated users  
    - Star rating component  
  - Related products section:  
    - Show products from the same category  
    - Product card carousel

- [X] Shopping cart:
  - Add/remove items  
  - Update quantities  
  - Cart persistence (via localStorage or Zustand)

- [X] Checkout process:
  - Shipping information (Full name, phone number, delivery address)  
  - Payment integration (Stripe â€” international, extendable to Momo/VNPAY later)  
  - Order confirmation page with order ID

- [X] User dashboard:
  - Order history (with status tracking)  
  - Profile management (personal info, password change)  
  - Saved addresses  
  - Wishlist (favorite products)


### 4. Admin Dashboard [ ]

- [X] Admin authentication and authorization (Implemented: /admin route, only accessible by isAdmin users, unauthorized users redirected)
- [X] Dashboard overview:
  - [X] Layout and Structure:
    - [X] Create admin dashboard layout with sidebar navigation
    - [X] Implement responsive grid for dashboard widgets
    - [X] Add loading states and error boundaries
  - [X] Key Metrics Cards:
    - [X] Total revenue widget with real data
    - [X] Total orders widget with real data
    - [X] Total customers widget with real data
    - [X] Average order value widget with real data
  - [X] Sales Analytics:
    - [X] Revenue Chart:
      - [X] Implement line chart using Recharts
      - [X] Add daily/weekly/monthly/yearly filters
      - [X] Show revenue trends over time
      - [X] Add tooltip with detailed information
    - [X] Order Statistics:
      - [X] Bar chart for order volume
      - [X] Order status distribution
      - [X] Peak ordering times
  - [X] Recent Orders Table:
    - [X] Implement data table with columns:
      - [X] Order ID
      - [X] Customer name
      - [X] Order total
      - [X] Status
      - [X] Date
    - [X] Add sorting and filtering
    - [X] Quick actions (view, process, update status)
  - [X] Low Stock Alerts:
    - [X] Products with stock below threshold
    - [X] Quick restock actions
    - [X] Stock level indicators
  - [X] Top Products:
    - [X] Best-selling products list
    - [X] Revenue by product
    - [X] Stock status
  - [X] Customer Insights:
    - [X] New vs returning customers
    - [X] Customer acquisition chart
    - [X] Top customers by revenue
  - [X] Real-time Updates:
    - [X] Implement WebSocket connection
    - [X] Live order notifications
    - [X] Stock level updates
  - [X] Export and Reports:
    - [X] CSV/PDF export functionality
    - [X] Custom date range selection
    - [X] Report generation
- [X] Product management:
  - CRUD operations
  - Bulk actions
  - Image upload (Uploadthing)
- [X] Order management:
  - Order processing
  - Status updates
  - Refund handling
- [X] User management:
  - Customer list
  - Admin privileges
  - User actions

### 5. Advanced Features [ ]

- [ ] Real-time notifications
- [ ] Email system (Resend):
  - Order confirmations
  - Shipping updates
  - Password reset
- [ ] Search optimization
- [ ] Performance optimization:
  - Image optimization
  - Caching strategies
  - API optimization
- [ ] Analytics and reporting

### 6. Testing and Deployment [ ]

- [ ] Unit testing
- [ ] Integration testing
- [ ] E2E testing
- [ ] Security audit
- [ ] Production deployment:
  - Environment setup
  - CI/CD pipeline
  - Monitoring
  - Backup strategy

### 7. Documentation [ ]

- [ ] API documentation
- [ ] User guide
- [ ] Admin documentation
- [ ] Deployment guide
